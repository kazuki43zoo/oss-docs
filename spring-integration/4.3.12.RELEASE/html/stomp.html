<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>28.&nbsp;STOMP Support</title><link rel="stylesheet" type="text/css" href="css/manual-multipage.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Spring Integration Reference Manual"><link rel="up" href="spring-integration-endpoints.html" title="Part&nbsp;V.&nbsp;Integration Endpoints"><link rel="prev" href="sftp.html" title="27.&nbsp;SFTP Adapters"><link rel="next" href="stream.html" title="29.&nbsp;Stream Support"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">28.&nbsp;STOMP Support</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="sftp.html">Prev</a>&nbsp;</td><th width="60%" align="center">Part&nbsp;V.&nbsp;Integration Endpoints</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="stream.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="stomp" href="#stomp"></a>28.&nbsp;STOMP Support</h2></div></div></div>

<div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="stomp-introduction" href="#stomp-introduction"></a>28.1&nbsp;Introduction</h2></div></div></div>

<p>Spring Integration <span class="emphasis"><em>version 4.2</em></span> introduced <span class="emphasis"><em>STOMP Client</em></span> support.
It is based on the architecture, infrastructure and API from the Spring Framework&#8217;s <span class="emphasis"><em>messaging</em></span> module, <span class="emphasis"><em>stomp</em></span> package.
Many of Spring STOMP components (e.g. <code class="literal">StompSession</code> or <code class="literal">StompClientSupport</code>)
are used within Spring Integration.
For more information, please, refer to the <a class="ulink" href="http://docs.spring.io/spring/docs/current/spring-framework-reference/html/websocket.html#websocket-stomp-client" target="_top">Spring Framework STOMP Support</a>
chapter in the Spring Framework reference manual.</p>
</div>
<div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="stomp-overview" href="#stomp-overview"></a>28.2&nbsp;Overview</h2></div></div></div>

<p>To configure STOMP (Simple [or Streaming] Text Orientated Messaging Protocol) let&#8217;s start with the <span class="emphasis"><em>STOMP Client</em></span> object.
The Spring Framework provides these implementations:</p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">WebSocketStompClient</code> - built on the Spring WebSocket API with support for standard JSR-356 WebSocket, Jetty 9,
as well as SockJS for HTTP-based WebSocket emulation with SockJS Client.
</li><li class="listitem">
<code class="literal">Reactor2TcpStompClient</code> - built on <code class="literal">NettyTcpClient</code> from the <code class="literal">reactor-net</code> project.
</li></ul></div>
<p>Any other <code class="literal">StompClientSupport</code> implementation can be provided.
See the JavaDocs of those classes for more information.</p>
<p>The <code class="literal">StompClientSupport</code> class is designed as a <span class="emphasis"><em>factory</em></span> to produce a <code class="literal">StompSession</code> for the provided
<code class="literal">StompSessionHandler</code> and all the remaining work is done through the <span class="emphasis"><em>callbacks</em></span> to that <code class="literal">StompSessionHandler</code>
and <code class="literal">StompSession</code> abstraction.
With the Spring Integration <span class="emphasis"><em>adapter</em></span> abstraction, we
need to provide some managed shared object to represent our application as a STOMP client with its unique session.
For this purpose, Spring Integration provides the <code class="literal">StompSessionManager</code> abstraction to manage the <span class="emphasis"><em>single</em></span>
<code class="literal">StompSession</code> between any provided <code class="literal">StompSessionHandler</code>.
This allows the use of <span class="emphasis"><em>inbound</em></span> or <span class="emphasis"><em>outbound</em></span> channel adapters (or both) for the particular STOMP Broker.
See <code class="literal">StompSessionManager</code> (and its implementations) JavaDocs for more information.</p>
</div>
<div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="stomp-inbound-adapter" href="#stomp-inbound-adapter"></a>28.3&nbsp;STOMP Inbound Channel Adapter</h2></div></div></div>

<p>The <code class="literal">StompInboundChannelAdapter</code> is a one-stop <code class="literal">MessageProducer</code> component to subscribe our Spring Integration
application to the provided STOMP destinations and receive messages from them, converted from the STOMP
frames using the provided <code class="literal">MessageConverter</code> on the connected <code class="literal">StompSession</code>.
The destinations (and therefore STOMP subscriptions) can be changed at runtime using appropriate <code class="literal">@ManagedOperation</code> s
on the <code class="literal">StompInboundChannelAdapter</code>.</p>
<p>For more configuration options see <a class="xref" href="stomp.html#stomp-namespace" title="28.8&nbsp;STOMP Namespace Support">Section&nbsp;28.8, &#8220;STOMP Namespace Support&#8221;</a> and the <code class="literal">StompInboundChannelAdapter</code> JavaDocs.</p>
</div>
<div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="stomp-outbound-adapter" href="#stomp-outbound-adapter"></a>28.4&nbsp;STOMP Outbound Channel Adapter</h2></div></div></div>

<p>The <code class="literal">StompMessageHandler</code> is the <code class="literal">MessageHandler</code> for the <code class="literal">&lt;int-stomp:outbound-channel-adapter&gt;</code>
to send the outgoing <code class="literal">Message&lt;?&gt;</code> s to the STOMP <code class="literal">destination</code> (pre-configured or determined at runtime via a SpEL expression) STOMP through the <code class="literal">StompSession</code>, provided by the shared <code class="literal">StompSessionManager</code>.</p>
<p>For more configuration option see <a class="xref" href="stomp.html#stomp-namespace" title="28.8&nbsp;STOMP Namespace Support">Section&nbsp;28.8, &#8220;STOMP Namespace Support&#8221;</a> and the <code class="literal">StompMessageHandler</code> JavaDocs.</p>
</div>
<div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="stomp-headers" href="#stomp-headers"></a>28.5&nbsp;STOMP Headers Mapping</h2></div></div></div>

<p>The STOMP protocol provides <span class="emphasis"><em>headers</em></span> as part of frame; the entire structure of the STOMP frame
has this format:</p>
<pre class="literallayout">COMMAND
header1:value1
header2:value2

Body^@</pre>
<p>Spring Framework provides <code class="literal">StompHeaders</code>, to represent these headers.
See the JavaDocs for more details.
STOMP frames are converted to/from <code class="literal">Message&lt;?&gt;</code> and these headers are mapped to/from <code class="literal">MessageHeaders</code>.
Spring Integration provides a default <code class="literal">HeaderMapper</code> implementation for the STOMP adapters.
The implementation is <code class="literal">StompHeaderMapper</code> which provides <code class="literal">fromHeaders()</code> and <code class="literal">toHeaders()</code> operations for the
<span class="emphasis"><em>inbound</em></span> and <span class="emphasis"><em>outbound</em></span> adapters respectively.</p>
<p>As with many other Spring Integration modules, the <code class="literal">IntegrationStompHeaders</code> class has been
introduced to map standard STOMP headers to <code class="literal">MessageHeaders</code> with <code class="literal">stomp_</code> as the header name prefix.
In addition, all <code class="literal">MessageHeaders</code> with that prefix are mapped to the <code class="literal">StompHeaders</code> when sending to a destination.</p>
<p>For more information, see the JavaDocs of those classes and the <code class="literal">mapped-headers</code> attribute description in the
<a class="xref" href="stomp.html#stomp-namespace" title="28.8&nbsp;STOMP Namespace Support">Section&nbsp;28.8, &#8220;STOMP Namespace Support&#8221;</a>.</p>
</div>
<div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="stomp-events" href="#stomp-events"></a>28.6&nbsp;STOMP Integration Events</h2></div></div></div>

<p>Many STOMP operations are asynchronous, including error handling.
For example, STOMP has a <code class="literal">RECEIPT</code> server frame that is returned when a client frame has requested one by adding
the <code class="literal">RECEIPT</code> header.
To provide access to these asynchronous events, Spring Integration emits <code class="literal">StompIntegrationEvent</code> s which can be
obtained by implementing an <code class="literal">ApplicationListener</code> or using an <code class="literal">&lt;int-event:inbound-channel-adapter&gt;</code> (see <a class="xref" href="applicationevent.html#appevent-inbound" title="12.1&nbsp;Receiving Spring Application Events">Section&nbsp;12.1, &#8220;Receiving Spring Application Events&#8221;</a>).</p>
<p>Specifically, a <code class="literal">StompExceptionEvent</code> is emitted from the <code class="literal">AbstractStompSessionManager</code>, when a
<code class="literal">stompSessionListenableFuture</code> receives <code class="literal">onFailure()</code> in case of failure to connect to STOMP Broker.
Another example is the <code class="literal">StompMessageHandler</code> which processes
<code class="literal">ERROR</code> STOMP frames, which are server responses to improper, unaccepted, messages sent by this <code class="literal">StompMessageHandler</code>.</p>
<p>The <code class="literal">StompReceiptEvent</code> s are emitted from the <code class="literal">StompMessageHandler</code> as a part of <code class="literal">StompSession.Receiptable</code>
callbacks in the asynchronous answers for the sent messages to the <code class="literal">StompSession</code>.
The <code class="literal">StompReceiptEvent</code> can be positive and negative depending on whether or not the <code class="literal">RECEIPT</code> frame was received
from the server within the <code class="literal">receiptTimeLimit</code> period, which can be configured on the <code class="literal">StompClientSupport</code> instance.
Defaults to <code class="literal">15 * 1000</code>.</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top">
<p>The <code class="literal">StompSession.Receiptable</code> callbacks are added only if the <code class="literal">RECEIPT</code> STOMP header of the message to send
is not <code class="literal">null</code>.
Automatic <code class="literal">RECEIPT</code> header generation can be enabled on the <code class="literal">StompSession</code> through its <code class="literal">autoReceipt</code> option and
on the <code class="literal">StompSessionManager</code> respectively.</p>
</td></tr></table></div>
<p>See the next paragraph for more information how to configure Spring Integration to accept those <code class="literal">ApplicationEvent</code> s.</p>
</div>
<div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="stomp-java-config" href="#stomp-java-config"></a>28.7&nbsp;STOMP Adapters Java Configuration</h2></div></div></div>

<p>A comprehensive Java &amp; Annotation Configuration for STOMP Adapters may look like this:</p>
<pre class="programlisting"><em><span class="hl-annotation" style="color: gray">@Configuration</span></em>
<em><span class="hl-annotation" style="color: gray">@EnableIntegration</span></em>
<span class="hl-keyword">public</span> <span class="hl-keyword">class</span> StompConfiguration {

    <em><span class="hl-annotation" style="color: gray">@Bean</span></em>
    <span class="hl-keyword">public</span> Reactor2TcpStompClient stompClient() {
        Reactor2TcpStompClient stompClient = <span class="hl-keyword">new</span> Reactor2TcpStompClient(<span class="hl-string">"127.0.0.1"</span>, <span class="hl-number">61613</span>);
        stompClient.setMessageConverter(<span class="hl-keyword">new</span> PassThruMessageConverter());
        ThreadPoolTaskScheduler taskScheduler = <span class="hl-keyword">new</span> ThreadPoolTaskScheduler();
        taskScheduler.afterPropertiesSet();
        stompClient.setTaskScheduler(taskScheduler);
        stompClient.setReceiptTimeLimit(<span class="hl-number">5000</span>);
        <span class="hl-keyword">return</span> stompClient;
    }

    <em><span class="hl-annotation" style="color: gray">@Bean</span></em>
    <span class="hl-keyword">public</span> StompSessionManager stompSessionManager() {
        Reactor2TcpStompSessionManager stompSessionManager = <span class="hl-keyword">new</span> Reactor2TcpStompSessionManager(stompClient());
        stompSessionManager.setAutoReceipt(true);
        <span class="hl-keyword">return</span> stompSessionManager;
    }

    <em><span class="hl-annotation" style="color: gray">@Bean</span></em>
    <span class="hl-keyword">public</span> PollableChannel stompInputChannel() {
        <span class="hl-keyword">return</span> <span class="hl-keyword">new</span> QueueChannel();
    }

    <em><span class="hl-annotation" style="color: gray">@Bean</span></em>
    <span class="hl-keyword">public</span> StompInboundChannelAdapter stompInboundChannelAdapter() {
        StompInboundChannelAdapter adapter =
        		<span class="hl-keyword">new</span> StompInboundChannelAdapter(stompSessionManager(), <span class="hl-string">"/topic/myTopic"</span>);
        adapter.setOutputChannel(stompInputChannel());
        <span class="hl-keyword">return</span> adapter;
    }

    <em><span class="hl-annotation" style="color: gray">@Bean</span></em>
    <em><span class="hl-annotation" style="color: gray">@ServiceActivator(inputChannel = "stompOutputChannel")</span></em>
    <span class="hl-keyword">public</span> MessageHandler stompMessageHandler() {
        StompMessageHandler handler = <span class="hl-keyword">new</span> StompMessageHandler(stompSessionManager());
        handler.setDestination(<span class="hl-string">"/topic/myTopic"</span>);
        <span class="hl-keyword">return</span> handler;
    }

    <em><span class="hl-annotation" style="color: gray">@Bean</span></em>
    <span class="hl-keyword">public</span> PollableChannel stompEvents() {
        <span class="hl-keyword">return</span> <span class="hl-keyword">new</span> QueueChannel();
    }

    <em><span class="hl-annotation" style="color: gray">@Bean</span></em>
    <span class="hl-keyword">public</span> ApplicationListener&lt;ApplicationEvent&gt; stompEventListener() {
        ApplicationEventListeningMessageProducer producer = <span class="hl-keyword">new</span> ApplicationEventListeningMessageProducer();
        producer.setEventTypes(StompIntegrationEvent.<span class="hl-keyword">class</span>);
        producer.setOutputChannel(stompEvents());
        <span class="hl-keyword">return</span> producer;
    }

}</pre>
</div>
<div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="stomp-namespace" href="#stomp-namespace"></a>28.8&nbsp;STOMP Namespace Support</h2></div></div></div>

<p>Spring Integration <span class="emphasis"><em>STOMP</em></span> namespace implements the <span class="emphasis"><em>inbound</em></span> and <span class="emphasis"><em>outbound</em></span> channel adapter components described below.
To include it in your configuration, simply provide the following namespace declaration in your application context
configuration file:</p>
<pre class="programlisting"><span class="hl-directive" style="color: maroon">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hl-tag">&lt;beans</span> <span class="hl-attribute">xmlns</span>=<span class="hl-value">"http://www.springframework.org/schema/beans"</span>
  <span class="hl-attribute">xmlns:xsi</span>=<span class="hl-value">"http://www.w3.org/2001/XMLSchema-instance"</span>
  <span class="hl-attribute">xmlns:int</span>=<span class="hl-value">"http://www.springframework.org/schema/integration"</span>
  <span class="hl-attribute">xmlns:int-stomp</span>=<span class="hl-value">"http://www.springframework.org/schema/integration/stomp"</span>
  <span class="hl-attribute">xsi:schemaLocation</span>=<span class="hl-value">"
    http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/integration
    http://www.springframework.org/schema/integration/spring-integration.xsd
    http://www.springframework.org/schema/integration/stomp
    http://www.springframework.org/schema/integration/stomp/spring-integration-stomp.xsd"</span><span class="hl-tag">&gt;</span>
    ...
<span class="hl-tag">&lt;/beans&gt;</span></pre>
<p><span class="strong"><strong>&lt;int-stomp:outbound-channel-adapter&gt;</strong></span></p>
<pre class="programlisting"><span class="hl-tag">&lt;int-stomp:outbound-channel-adapter</span>
                           <span class="hl-attribute">id</span>=<span class="hl-value">""</span>  <a name="CO46-1" href="#CO46-1"></a><span><img src="images/callouts/1.png" alt="1" border="0"></span>
                           channel=""  <a name="CO46-2" href="#CO46-2"></a><span><img src="images/callouts/2.png" alt="2" border="0"></span>
                           stomp-session-manager=""  <a name="CO46-3" href="#CO46-3"></a><span><img src="images/callouts/3.png" alt="3" border="0"></span>
                           header-mapper=""  <a name="CO46-4" href="#CO46-4"></a><span><img src="images/callouts/4.png" alt="4" border="0"></span>
                           mapped-headers=""  <a name="CO46-5" href="#CO46-5"></a><span><img src="images/callouts/5.png" alt="5" border="0"></span>
                           destination=""  <a name="CO46-6" href="#CO46-6"></a><span><img src="images/callouts/6.png" alt="6" border="0"></span>
                           destination-expression=""  <a name="CO46-7" href="#CO46-7"></a><span><img src="images/callouts/7.png" alt="7" border="0"></span>
                           auto-startup=""  <a name="CO46-8" href="#CO46-8"></a><span><img src="images/callouts/8.png" alt="8" border="0"></span>
                           phase=""/&gt;  <a name="CO46-9" href="#CO46-9"></a><span><img src="images/callouts/9.png" alt="9" border="0"></span></pre>
<div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO46-1"><span><img src="images/callouts/1.png" alt="1" border="0"></span></a> </p></td><td valign="top" align="left">
<p>The component bean name.
The <code class="literal">MessageHandler</code> is registered with the bean alias <code class="literal">id + '.handler'</code>.
If the <code class="literal">channel</code> attribute isn&#8217;t provided, a <code class="literal">DirectChannel</code> is created and registered with the application context
with this <code class="literal">id</code> attribute as the bean name.
In this case, the endpoint is registered with the bean name <code class="literal">id + '.adapter'</code>.</p>
</td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO46-2"><span><img src="images/callouts/2.png" alt="2" border="0"></span></a> </p></td><td valign="top" align="left">
<p>Identifies the channel attached to this adapter.
<span class="emphasis"><em>Optional</em></span> - if <code class="literal">id</code> is present - see <code class="literal">id</code>.</p>
</td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO46-3"><span><img src="images/callouts/3.png" alt="3" border="0"></span></a> </p></td><td valign="top" align="left">
<p>Reference to a <code class="literal">StompSessionManager</code> bean, which encapsulates the low-level connection and <code class="literal">StompSession</code>
handling operations.
<span class="emphasis"><em>Required</em></span>.</p>
</td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO46-4"><span><img src="images/callouts/4.png" alt="4" border="0"></span></a> </p></td><td valign="top" align="left">
<p>Reference to a bean implementing <code class="literal">HeaderMapper&lt;StompHeaders&gt;</code> that maps Spring Integration MessageHeaders to/from
STOMP frame headers.
This is mutually exclusive with <code class="literal">mapped-headers</code>.
Defaults to <code class="literal">StompHeaderMapper</code>.</p>
</td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO46-5"><span><img src="images/callouts/5.png" alt="5" border="0"></span></a> </p></td><td valign="top" align="left">
<p>Comma-separated list of names of STOMP Headers to be mapped to the STOMP frame headers.
This can only be provided if the <code class="literal">header-mapper</code> reference is not set.
The values in this list can also be simple patterns to be matched against the header names (e.g. "foo*" or "*foo").
A special token <code class="literal">STOMP_OUTBOUND_HEADERS</code> represents all the standard STOMP headers
(content-length, receipt, heart-beat etc); they are included by default.
If you wish to add your own headers, you must also include this token if you wish the standard headers to also be
mapped or provide your own <code class="literal">HeaderMapper</code> implementation using <code class="literal">header-mapper</code>.</p>
</td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO46-6"><span><img src="images/callouts/6.png" alt="6" border="0"></span></a> </p></td><td valign="top" align="left">
<p>Name of the destination to which STOMP Messages will be sent.
Mutually exclusive with the <code class="literal">destination-expression</code>.</p>
</td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO46-7"><span><img src="images/callouts/7.png" alt="7" border="0"></span></a> </p></td><td valign="top" align="left">
<p>A SpEL expression to be evaluated at runtime against each Spring Integration <code class="literal">Message</code> as the root object.
Mutually exclusive with the <code class="literal">destination</code>.</p>
</td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO46-8"><span><img src="images/callouts/8.png" alt="8" border="0"></span></a> </p></td><td valign="top" align="left">
<p>Boolean value indicating whether this endpoint should start automatically.
Default to <code class="literal">true</code>.</p>
</td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO46-9"><span><img src="images/callouts/9.png" alt="9" border="0"></span></a> </p></td><td valign="top" align="left">
<p>The lifecycle phase within which this endpoint should start and stop.
The lower the value the earlier this endpoint will start and the later it will stop.
The default is <code class="literal">Integer.MIN_VALUE</code>.
Values can be negative.
See <code class="literal">SmartLifeCycle</code>.</p>
</td></tr></table></div>
<p><span class="strong"><strong>&lt;int-stomp:inbound-channel-adapter&gt;</strong></span></p>
<pre class="programlisting"><span class="hl-tag">&lt;int-stomp:inbound-channel-adapter</span>
                           <span class="hl-attribute">id</span>=<span class="hl-value">""</span>  <a name="CO47-1" href="#CO47-1"></a><span><img src="images/callouts/1.png" alt="1" border="0"></span>
                           channel=""  <a name="CO47-2" href="#CO47-2"></a><span><img src="images/callouts/2.png" alt="2" border="0"></span>
                           error-channel=""  <a name="CO47-3" href="#CO47-3"></a><span><img src="images/callouts/3.png" alt="3" border="0"></span>
                           stomp-session-manager=""  <a name="CO47-4" href="#CO47-4"></a><span><img src="images/callouts/4.png" alt="4" border="0"></span>
                           header-mapper=""  <a name="CO47-5" href="#CO47-5"></a><span><img src="images/callouts/5.png" alt="5" border="0"></span>
                           mapped-headers=""  <a name="CO47-6" href="#CO47-6"></a><span><img src="images/callouts/6.png" alt="6" border="0"></span>
                           destinations=""  <a name="CO47-7" href="#CO47-7"></a><span><img src="images/callouts/7.png" alt="7" border="0"></span>
                           send-timeout=""  <a name="CO47-8" href="#CO47-8"></a><span><img src="images/callouts/8.png" alt="8" border="0"></span>
                           payload-type=""  <a name="CO47-9" href="#CO47-9"></a><span><img src="images/callouts/9.png" alt="9" border="0"></span>
                           auto-startup=""  <a name="CO47-10" href="#CO47-10"></a><span><img src="images/callouts/10.png" alt="10" border="0"></span>
                           phase=""/&gt;  <a name="CO47-11" href="#CO47-11"></a><span><img src="images/callouts/11.png" alt="11" border="0"></span></pre>
<div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO47-1"><span><img src="images/callouts/1.png" alt="1" border="0"></span></a> </p></td><td valign="top" align="left">
<p>The component bean name.
If the <code class="literal">channel</code> attribute isn&#8217;t provided, a <code class="literal">DirectChannel</code> is created and registered with the application context
with this <code class="literal">id</code> attribute as the bean name.
In this case, the endpoint is registered with the bean name <code class="literal">id + '.adapter'</code>.</p>
</td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO47-2"><span><img src="images/callouts/2.png" alt="2" border="0"></span></a> </p></td><td valign="top" align="left">
<p>Identifies the channel attached to this adapter.</p>
</td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO47-3"><span><img src="images/callouts/3.png" alt="3" border="0"></span></a> </p></td><td valign="top" align="left">
<p>The <code class="literal">MessageChannel</code> bean reference to which the <code class="literal">ErrorMessages</code> should be sent.</p>
</td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO47-4"><span><img src="images/callouts/4.png" alt="4" border="0"></span></a> </p></td><td valign="top" align="left">
<p>See the same option on the <code class="literal">&lt;int-stomp:outbound-channel-adapter&gt;</code>.</p>
</td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO47-5"><span><img src="images/callouts/5.png" alt="5" border="0"></span></a> </p></td><td valign="top" align="left">
<p>Comma-separated list of names of STOMP Headers to be mapped from the STOMP frame headers.
This can only be provided if the <code class="literal">header-mapper</code> reference is not set.
The values in this list can also be simple patterns to be matched against the header names (e.g. "foo*" or "*foo").
A special token <code class="literal">STOMP_INBOUND_HEADERS</code> represents all the standard STOMP headers
(content-length, receipt, heart-beat etc); they are included by default.
If you wish to add your own headers, you must also include this token if you wish the standard headers to also be
mapped or provide your own <code class="literal">HeaderMapper</code> implementation using <code class="literal">header-mapper</code>.</p>
</td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO47-6"><span><img src="images/callouts/6.png" alt="6" border="0"></span></a> </p></td><td valign="top" align="left">
<p>See the same option on the <code class="literal">&lt;int-stomp:outbound-channel-adapter&gt;</code>.</p>
</td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO47-7"><span><img src="images/callouts/7.png" alt="7" border="0"></span></a> </p></td><td valign="top" align="left">
<p>Comma-separated list of STOMP destination names to subscribe.
The list of destinations (and therefore subscriptions) can be modified at runtime
through the <code class="literal">addDestination()</code> and <code class="literal">removeDestination()</code> <code class="literal">@ManagedOperation</code> s.</p>
</td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO47-8"><span><img src="images/callouts/8.png" alt="8" border="0"></span></a> </p></td><td valign="top" align="left">
<p>Maximum amount of time in milliseconds to wait when sending a message to the channel if the channel may block.
For example, a <code class="literal">QueueChannel</code> can block until space is available if its maximum capacity has been reached.</p>
</td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO47-9"><span><img src="images/callouts/9.png" alt="9" border="0"></span></a> </p></td><td valign="top" align="left">
<p>Fully qualified name of the java type for the target <code class="literal">payload</code> to convert from the incoming STOMP Frame.
Default to <code class="literal">String.class</code>.</p>
</td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO47-10"><span><img src="images/callouts/10.png" alt="10" border="0"></span></a> </p></td><td valign="top" align="left">
<p>See the same option on the <code class="literal">&lt;int-stomp:outbound-channel-adapter&gt;</code>.</p>
</td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO47-11"><span><img src="images/callouts/11.png" alt="11" border="0"></span></a> </p></td><td valign="top" align="left">
<p>See the same option on the <code class="literal">&lt;int-stomp:outbound-channel-adapter&gt;</code>.</p>
</td></tr></table></div>
</div>
</div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="sftp.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="spring-integration-endpoints.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="stream.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">27.&nbsp;SFTP Adapters&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;29.&nbsp;Stream Support</td></tr></table></div></body></html>