
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Rules Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="Theories.html" />
    
    
    <link rel="prev" href="Assumptions-with-Assume.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="Download-and-Install.html">
            
                <a href="Download-and-Install.html">
            
                    
                    Download and Install
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="Getting-Started.html">
            
                <a href="Getting-Started.html">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="Maintainer-Documentation.html">
            
                <a href="Maintainer-Documentation.html">
            
                    
                    Maintainer Documentation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="Deprecation-Policy.html">
            
                <a href="Deprecation-Policy.html">
            
                    
                    Deprecation Policy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="I-want-to-help!.html">
            
                <a href="I-want-to-help!.html">
            
                    
                    I want to help!
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">JUnit Usage and Idioms</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="Assertions.html">
            
                <a href="Assertions.html">
            
                    
                    Assertions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="Test-Runners.html">
            
                <a href="Test-Runners.html">
            
                    
                    Test Runners
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="Aggregating-tests-in-Suites.html">
            
                <a href="Aggregating-tests-in-Suites.html">
            
                    
                    Aggregating tests in Suites
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="Test-Execution-Order.html">
            
                <a href="Test-Execution-Order.html">
            
                    
                    Test Execution Order
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="Exception-Testing.html">
            
                <a href="Exception-Testing.html">
            
                    
                    Exception Testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="Matchers-and-assertThat.html">
            
                <a href="Matchers-and-assertThat.html">
            
                    
                    Matchers and assertThat
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="Ignoring-Tests.html">
            
                <a href="Ignoring-Tests.html">
            
                    
                    Ignoring Tests
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.8" data-path="Timeout-for-Tests.html">
            
                <a href="Timeout-for-Tests.html">
            
                    
                    Timeout for Tests
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.9" data-path="Parameterized-Tests.html">
            
                <a href="Parameterized-Tests.html">
            
                    
                    Parameterized Tests
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.10" data-path="Assumptions-with-Assume.html">
            
                <a href="Assumptions-with-Assume.html">
            
                    
                    Assumptions with Assume
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="2.11" data-path="Rules.html">
            
                <a href="Rules.html">
            
                    
                    Rules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.12" data-path="Theories.html">
            
                <a href="Theories.html">
            
                    
                    Theories
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.13" data-path="Test-Fixtures.html">
            
                <a href="Test-Fixtures.html">
            
                    
                    Test Fixtures
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.14" data-path="Categories.html">
            
                <a href="Categories.html">
            
                    
                    Categories
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.15" data-path="Use-with-Maven.html">
            
                <a href="Use-with-Maven.html">
            
                    
                    Use with Maven
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.16" data-path="Use-with-Gradle.html">
            
                <a href="Use-with-Gradle.html">
            
                    
                    Use with Gradle
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.17" data-path="Multithreaded-code-and-Concurrency.html">
            
                <a href="Multithreaded-code-and-Concurrency.html">
            
                    
                    Multithreaded code and Concurrency
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.18" data-path="Java-contract-test-helpers.html">
            
                <a href="Java-contract-test-helpers.html">
            
                    
                    Java contract test helpers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.19" data-path="Continuous-Testing.html">
            
                <a href="Continuous-Testing.html">
            
                    
                    Continuous Testing
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Third-party extensions</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="Custom-Runners.html">
            
                <a href="Custom-Runners.html">
            
                    
                    Custom Runners
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Rules</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h3 id="rules">Rules</h3>
<ul>
<li>Rules allow very flexible addition or redefinition of the behavior
of each test method in a test class.  Testers can reuse or extend one of the 
provided Rules below, or write their own.</li>
</ul>
<h3 id="example">Example</h3>
<p>For an example of a rule usage, there follows a test using the TemporaryFolder and ExpectedException rules:</p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DigitalAssetManagerTest</span> </span>{
  <span class="hljs-meta">@Rule</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> TemporaryFolder tempFolder = <span class="hljs-keyword">new</span> TemporaryFolder();

  <span class="hljs-meta">@Rule</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> ExpectedException exception = ExpectedException.none();

  <span class="hljs-meta">@Test</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">countsAssets</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException </span>{
    File icon = tempFolder.newFile(<span class="hljs-string">&quot;icon.png&quot;</span>);
    File assets = tempFolder.newFolder(<span class="hljs-string">&quot;assets&quot;</span>);
    createAssets(assets, <span class="hljs-number">3</span>);

    DigitalAssetManager dam = <span class="hljs-keyword">new</span> DigitalAssetManager(icon, assets);
    assertEquals(<span class="hljs-number">3</span>, dam.getAssetCount());
  }

  <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">createAssets</span><span class="hljs-params">(File assets, <span class="hljs-keyword">int</span> numberOfAssets)</span> <span class="hljs-keyword">throws</span> IOException </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> index = <span class="hljs-number">0</span>; index &lt; numberOfAssets; index++) {
      File asset = <span class="hljs-keyword">new</span> File(assets, String.format(<span class="hljs-string">&quot;asset-%d.mpg&quot;</span>, index));
      Assert.assertTrue(<span class="hljs-string">&quot;Asset couldn&apos;t be created.&quot;</span>, asset.createNewFile());
    }
  }

  <span class="hljs-meta">@Test</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">throwsIllegalArgumentExceptionIfIconIsNull</span><span class="hljs-params">()</span> </span>{
    exception.expect(IllegalArgumentException.class);
    exception.expectMessage(<span class="hljs-string">&quot;Icon is null, not a file, or doesn&apos;t exist.&quot;</span>);
    <span class="hljs-keyword">new</span> DigitalAssetManager(<span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>);
  }
}
</code></pre>
<h1 id="base-rules-provided-in-the-distribution">Base Rules Provided in The Distribution</h1>
<h2 id="temporaryfolder-rule">TemporaryFolder Rule</h2>
<ul>
<li>The TemporaryFolder Rule allows creation of files and folders that are deleted when the test method finishes (whether it passes or fails). By default no exception is thrown if resources cannot be deleted:</li>
</ul>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HasTempFolder</span> </span>{
  <span class="hljs-meta">@Rule</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> TemporaryFolder folder = <span class="hljs-keyword">new</span> TemporaryFolder();

  <span class="hljs-meta">@Test</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testUsingTempFolder</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException </span>{
    File createdFile = folder.newFile(<span class="hljs-string">&quot;myfile.txt&quot;</span>);
    File createdFolder = folder.newFolder(<span class="hljs-string">&quot;subfolder&quot;</span>);
    <span class="hljs-comment">// ...</span>
  }
}
</code></pre>
<ul>
<li><code>TemporaryFolder#newFolder(String... folderNames)</code> creates recursively deep temporary folders </li>
<li><code>TemporaryFolder#newFile()</code> creates a randomly named new file, and <code>#newFolder()</code> creates a randomly named new folder</li>
<li>Starting with version 4.13 <code>TemporaryFolder</code> optionally allows strict verification of deleted resources
which fails the test with <code>AssertionError</code> if resources cannot be deleted. This feature can only be opted for by using the <code>#builder()</code> method. By default strict verification is disabled which maintains backward compatibility.</li>
</ul>
<pre><code class="lang-java"><span class="hljs-meta">@Rule</span> 
<span class="hljs-keyword">public</span> TemporaryFolder folder = TemporaryFolder.builder().assureDeletion().build();
</code></pre>
<h2 id="externalresource-rules">ExternalResource Rules</h2>
<ul>
<li>ExternalResource is a base class for Rules (like TemporaryFolder)
that set up an external resource before a test (a file, socket, server,
database connection, etc.), and guarantee to tear it down afterward:</li>
</ul>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UsesExternalResource</span> </span>{
  Server myServer = <span class="hljs-keyword">new</span> Server();

  <span class="hljs-meta">@Rule</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> ExternalResource resource = <span class="hljs-keyword">new</span> ExternalResource() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">before</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Throwable </span>{
      myServer.connect();
    };

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">after</span><span class="hljs-params">()</span> </span>{
      myServer.disconnect();
    };
  };

  <span class="hljs-meta">@Test</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testFoo</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">new</span> Client().run(myServer);
  }
}
</code></pre>
<h2 id="errorcollector-rule">ErrorCollector Rule</h2>
<ul>
<li>The ErrorCollector Rule allows execution of a test to continue
after the first problem is found (for example, to collect <em>all</em> the 
incorrect rows in a table, and report them all at once):</li>
</ul>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UsesErrorCollectorTwice</span> </span>{
  <span class="hljs-meta">@Rule</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> ErrorCollector collector = <span class="hljs-keyword">new</span> ErrorCollector();

  <span class="hljs-meta">@Test</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">example</span><span class="hljs-params">()</span> </span>{
    collector.addError(<span class="hljs-keyword">new</span> Throwable(<span class="hljs-string">&quot;first thing went wrong&quot;</span>));
    collector.addError(<span class="hljs-keyword">new</span> Throwable(<span class="hljs-string">&quot;second thing went wrong&quot;</span>));
  }
}
</code></pre>
<h2 id="verifier-rule">Verifier Rule</h2>
<ul>
<li>Verifier is a base class for Rules like ErrorCollector, which
can turn otherwise passing test methods into failing tests if a verification
check is failed.</li>
</ul>
<pre><code class="lang-java">
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UsesVerifier</span> </span>{

  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String sequence;

  <span class="hljs-meta">@Rule</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Verifier collector = <span class="hljs-keyword">new</span> Verifier() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">verify</span><span class="hljs-params">()</span> </span>{
      sequence += <span class="hljs-string">&quot;verify &quot;</span>;
    }
  };

  <span class="hljs-meta">@Test</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">example</span><span class="hljs-params">()</span> </span>{
    sequence += <span class="hljs-string">&quot;test &quot;</span>;
  }

  <span class="hljs-meta">@Test</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">verifierRunsAfterTest</span><span class="hljs-params">()</span> </span>{
    sequence = <span class="hljs-string">&quot;&quot;</span>;
    assertThat(testResult(UsesVerifier.class), isSuccessful());
    assertEquals(<span class="hljs-string">&quot;test verify &quot;</span>, sequence);
  }

}
</code></pre>
<h2 id="testwatchmantestwatcher-rules">TestWatchman/TestWatcher Rules</h2>
<ul>
<li>TestWatcher replaces TestWatchman from version 4.9.  It implements TestRule, not MethodRule
-- <a href="http://junit.org/javadoc/latest/org/junit/rules/TestWatcher.html" target="_blank">http://junit.org/javadoc/latest/org/junit/rules/TestWatcher.html</a></li>
<li>TestWatchman was introduced in JUnit 4.7, it uses a MethodRule, which is now deprecated. 
-- <a href="http://junit.org/javadoc/latest/org/junit/rules/TestWatchman.html" target="_blank">http://junit.org/javadoc/latest/org/junit/rules/TestWatchman.html</a></li>
<li>TestWatcher (and the deprecated TestWatchman) are base classes for Rules that take note of the testing action, without modifying it.  For example, this class will keep a log of each passing and failing test:</li>
</ul>
<pre><code class="lang-java"><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> org.junit.Assert.fail; 
<span class="hljs-keyword">import</span> org.junit.AssumptionViolatedException; 
<span class="hljs-keyword">import</span> org.junit.Rule;
<span class="hljs-keyword">import</span> org.junit.Test;
<span class="hljs-keyword">import</span> org.junit.rules.TestRule;
<span class="hljs-keyword">import</span> org.junit.rules.TestWatcher;
<span class="hljs-keyword">import</span> org.junit.runner.Description;
<span class="hljs-keyword">import</span> org.junit.runners.model.Statement;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WatchmanTest</span> </span>{
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String watchedLog;

  <span class="hljs-meta">@Rule</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> TestRule watchman = <span class="hljs-keyword">new</span> TestWatcher() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Statement <span class="hljs-title">apply</span><span class="hljs-params">(Statement base, Description description)</span> </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">super</span>.apply(base, description);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">succeeded</span><span class="hljs-params">(Description description)</span> </span>{
      watchedLog += description.getDisplayName() + <span class="hljs-string">&quot; &quot;</span> + <span class="hljs-string">&quot;success!\n&quot;</span>;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">failed</span><span class="hljs-params">(Throwable e, Description description)</span> </span>{
      watchedLog += description.getDisplayName() + <span class="hljs-string">&quot; &quot;</span> + e.getClass().getSimpleName() + <span class="hljs-string">&quot;\n&quot;</span>;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">skipped</span><span class="hljs-params">(AssumptionViolatedException e, Description description)</span> </span>{
      watchedLog += description.getDisplayName() + <span class="hljs-string">&quot; &quot;</span> + e.getClass().getSimpleName() + <span class="hljs-string">&quot;\n&quot;</span>;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">starting</span><span class="hljs-params">(Description description)</span> </span>{
      <span class="hljs-keyword">super</span>.starting(description);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">finished</span><span class="hljs-params">(Description description)</span> </span>{
      <span class="hljs-keyword">super</span>.finished(description);
    }
  };

  <span class="hljs-meta">@Test</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">fails</span><span class="hljs-params">()</span> </span>{
    fail();
  }

  <span class="hljs-meta">@Test</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">succeeds</span><span class="hljs-params">()</span> </span>{
  }
}
</code></pre>
<h2 id="testname-rule">TestName Rule</h2>
<ul>
<li>The TestName Rule makes the current test name available inside test methods:</li>
</ul>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NameRuleTest</span> </span>{
  <span class="hljs-meta">@Rule</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> TestName name = <span class="hljs-keyword">new</span> TestName();

  <span class="hljs-meta">@Test</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testA</span><span class="hljs-params">()</span> </span>{
    assertEquals(<span class="hljs-string">&quot;testA&quot;</span>, name.getMethodName());
  }

  <span class="hljs-meta">@Test</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testB</span><span class="hljs-params">()</span> </span>{
    assertEquals(<span class="hljs-string">&quot;testB&quot;</span>, name.getMethodName());
  }
}
</code></pre>
<h2 id="timeout-rule">Timeout Rule</h2>
<ul>
<li>The Timeout Rule applies the same timeout to all test methods in a class:</li>
</ul>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HasGlobalTimeout</span> </span>{
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String log;

  <span class="hljs-meta">@Rule</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> TestRule globalTimeout = Timeout.millis(<span class="hljs-number">20</span>);

  <span class="hljs-meta">@Test</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testInfiniteLoop1</span><span class="hljs-params">()</span> </span>{
    log += <span class="hljs-string">&quot;ran1&quot;</span>;
    <span class="hljs-keyword">for</span>(;;) {}
  }

  <span class="hljs-meta">@Test</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testInfiniteLoop2</span><span class="hljs-params">()</span> </span>{
    log += <span class="hljs-string">&quot;ran2&quot;</span>;
    <span class="hljs-keyword">for</span>(;;) {}
  }
}
</code></pre>
<h2 id="expectedexception-rules">ExpectedException Rules</h2>
<ul>
<li>The ExpectedException Rule allows in-test specification
of expected exception types and messages:</li>
</ul>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HasExpectedException</span> </span>{
  <span class="hljs-meta">@Rule</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> ExpectedException thrown = ExpectedException.none();

  <span class="hljs-meta">@Test</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">throwsNothing</span><span class="hljs-params">()</span> </span>{

  }

  <span class="hljs-meta">@Test</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">throwsNullPointerException</span><span class="hljs-params">()</span> </span>{
    thrown.expect(NullPointerException.class);
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NullPointerException();
  }

  <span class="hljs-meta">@Test</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">throwsNullPointerExceptionWithMessage</span><span class="hljs-params">()</span> </span>{
    thrown.expect(NullPointerException.class);
    thrown.expectMessage(<span class="hljs-string">&quot;happened?&quot;</span>);
    thrown.expectMessage(startsWith(<span class="hljs-string">&quot;What&quot;</span>));
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NullPointerException(<span class="hljs-string">&quot;What happened?&quot;</span>);
  }
}
</code></pre>
<h2 id="classrule">ClassRule</h2>
<p>The <code>ClassRule</code> annotation extends the idea of method-level Rules,
adding static fields that can affect the operation of a whole class.  Any
subclass of <code>ParentRunner</code>, including the standard <code>BlockJUnit4ClassRunner</code> 
and <code>Suite</code> classes, will support <code>ClassRule</code>s.</p>
<p>For example, here is a test suite that connects to a server once before
all the test classes run, and disconnects after they are finished:</p>
<pre><code class="lang-java"><span class="hljs-meta">@RunWith</span>(Suite.class)
<span class="hljs-meta">@SuiteClasses</span>({A.class, B.class, C.class})
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UsesExternalResource</span> </span>{
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Server myServer = <span class="hljs-keyword">new</span> Server();

  <span class="hljs-meta">@ClassRule</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ExternalResource resource = <span class="hljs-keyword">new</span> ExternalResource() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">before</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Throwable </span>{
      myServer.connect();
    };

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">after</span><span class="hljs-params">()</span> </span>{
      myServer.disconnect();
    };
  };
}
</code></pre>
<h2 id="rulechain">RuleChain</h2>
<p>The RuleChain rule allows ordering of TestRules:</p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UseRuleChain</span> </span>{
    <span class="hljs-meta">@Rule</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> TestRule chain = RuleChain
                           .outerRule(<span class="hljs-keyword">new</span> LoggingRule(<span class="hljs-string">&quot;outer rule&quot;</span>))
                           .around(<span class="hljs-keyword">new</span> LoggingRule(<span class="hljs-string">&quot;middle rule&quot;</span>))
                           .around(<span class="hljs-keyword">new</span> LoggingRule(<span class="hljs-string">&quot;inner rule&quot;</span>));

    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">example</span><span class="hljs-params">()</span> </span>{
        assertTrue(<span class="hljs-keyword">true</span>);
    }
}
</code></pre>
<p>writes the log</p>
<pre><code>starting outer rule
starting middle rule
starting inner rule
finished inner rule
finished middle rule
finished outer rule
</code></pre><h1 id="custom-rules">Custom Rules</h1>
<p>Most custom rules can be implemented as an extension of the <code>ExternalResource</code> rule. However, if you need more information about the test class or method in question, you&apos;ll need to implement the <code>TestRule</code> interface.</p>
<pre><code class="lang-java"><span class="hljs-keyword">import</span> org.junit.rules.TestRule;
<span class="hljs-keyword">import</span> org.junit.runner.Description;
<span class="hljs-keyword">import</span> org.junit.runners.model.Statement;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IdentityRule</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">TestRule</span> </span>{
  <span class="hljs-meta">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> Statement <span class="hljs-title">apply</span><span class="hljs-params">(<span class="hljs-keyword">final</span> Statement base, <span class="hljs-keyword">final</span> Description description)</span> </span>{
    <span class="hljs-keyword">return</span> base;
  }
}
</code></pre>
<p>Of course, the power from implementing <code>TestRule</code> comes from using a combination of custom constructors, adding methods to the class for use in tests, and wrapping the provided <code>Statement</code> in a new <code>Statement</code>. For instance, consider the following test rule that provides a named logger for every test:</p>
<pre><code class="lang-java"><span class="hljs-keyword">package</span> org.example.junit;

<span class="hljs-keyword">import</span> java.util.logging.Logger;

<span class="hljs-keyword">import</span> org.junit.rules.TestRule;
<span class="hljs-keyword">import</span> org.junit.runner.Description;
<span class="hljs-keyword">import</span> org.junit.runners.model.Statement;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestLogger</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">TestRule</span> </span>{
  <span class="hljs-keyword">private</span> Logger logger;

  <span class="hljs-function"><span class="hljs-keyword">public</span> Logger <span class="hljs-title">getLogger</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.logger;
  }

  <span class="hljs-meta">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> Statement <span class="hljs-title">apply</span><span class="hljs-params">(<span class="hljs-keyword">final</span> Statement base, <span class="hljs-keyword">final</span> Description description)</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Statement() {
      <span class="hljs-meta">@Override</span>
      <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">evaluate</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Throwable </span>{
        logger = Logger.getLogger(description.getTestClass().getName() + <span class="hljs-string">&apos;.&apos;</span> + description.getDisplayName());
        base.evaluate();
      }
    };
  }
}
</code></pre>
<p>Then that rule could be applied like so:</p>
<pre><code class="lang-java"><span class="hljs-keyword">import</span> java.util.logging.Logger;

<span class="hljs-keyword">import</span> org.example.junit.TestLogger;
<span class="hljs-keyword">import</span> org.junit.Rule;
<span class="hljs-keyword">import</span> org.junit.Test;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyLoggerTest</span> </span>{

  <span class="hljs-meta">@Rule</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> TestLogger logger = <span class="hljs-keyword">new</span> TestLogger();

  <span class="hljs-meta">@Test</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">checkOutMyLogger</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">final</span> Logger log = logger.getLogger();
    log.warn(<span class="hljs-string">&quot;Your test is showing!&quot;</span>);
  }

}
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Assumptions-with-Assume.html" class="navigation navigation-prev " aria-label="Previous page: Assumptions with Assume">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="Theories.html" class="navigation navigation-next " aria-label="Next page: Theories">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Rules","level":"2.11","depth":1,"next":{"title":"Theories","level":"2.12","depth":1,"path":"Theories.md","ref":"Theories.md","articles":[]},"previous":{"title":"Assumptions with Assume","level":"2.10","depth":1,"path":"Assumptions-with-Assume.md","ref":"Assumptions-with-Assume.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"Rules.md","mtime":"2018-07-25T18:16:39.447Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2018-07-25T19:06:52.738Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

